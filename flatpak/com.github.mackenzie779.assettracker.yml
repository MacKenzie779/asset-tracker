app-id: com.github.mackenzie779.assettracker
runtime: org.gnome.Platform
runtime-version: '47'        # or '46' if you prefer that runtime
sdk: org.gnome.Sdk
command: assettracker

# Permissions your Tauri app typically needs
finish-args:
  - --share=network
  - --socket=x11
  - --socket=wayland
  - --device=dri
  - --talk-name=org.freedesktop.Notifications
  - --talk-name=org.freedesktop.portal.*
  - --filesystem=home
  # If you use the Single Instance plugin:
  # - --own-name=org.de_mackenzie_AssetTracker.SingleInstance

# Make the .desktop/.icons from your .deb line up with the Flatpak app-id
rename-desktop-file: com.github.mackenzie779.assettracker.desktop
rename-icon: com.github.mackenzie779.assettracker
rename-appdata-file: com.github.mackenzie779.assettracker.metainfo.xml

modules:
  - name: assettracker
    buildsystem: simple
    sources:
      - type: file
        path: assettracker.deb    # we copy the built .deb here in CI
    build-commands:
      # Extract the .deb into /app
      - bsdtar --to-stdout -xf assettracker.deb data.* | bsdtar -x -C /app -f -
      # Ensure the binary is on PATH for "command:"
      - install -d /app/bin && ln -sf /app/usr/bin/assettracker /app/bin/assettracker
    cleanup:
      - /usr/share/doc
      - /usr/share/man
